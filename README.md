# Project_Mask

## Описание:

Проект Project_Mask представляет собой серверную часть виджета банковских операций и содержит следующие модули и функции:
1. Модуль masks содержит:
   - Функцию маскировки номера банковской карты get_mask_card_number
   - Функцию маскировки номера банковского счета get_mask_account
2. Модуль widget содержит:
   - Функцию mask_account_card, которая может обрабатывать информацию как о картах, так и о счетах. Эта функция принимает строку, содержащую тип и номер карты или счета, и возвращает строку с замаскированным номером.
   - Функцию форматирования даты get_date
3. Модуль processing содержит:
   - Функцию фильтрации списка операций по параметру состояния filter_by_state
   - Функцию сортировки операций по дате sort_by_date
4. Модуль generators, содержащий функции для работы с массивами транзакций:
   - Функция filter_by_currency, принимающая на вход список словарей, представляющих транзакции. Функция возвращает итератор, который поочередно выдает транзакции, где валюта операции соответствует заданной (USD либо RUB).
       
    *Пример использования функции filter_by_currency:*

          transactions - список словарей, содержащий набор данных о каждой транзакции.
          currency - код валюты, по которой требуется отфильтровать список транзакций (например, "USD").

          ```
             usd_transactions = filter_by_currency(transactions, currency="USD") #создаем переменную, в которую будет передаватья результат работы функции при каждой итерации
             for _ in range(2): #задаем количество итераций
                 print(next(usd_transactions)) #выводим результат каждой итерации поочередно

          >>>       {
                       "id": 939719570,
                       "state": "EXECUTED",
                       "date": "2018-06-30T02:08:58.425572",
                       "operationAmount": {
                           "amount": "9824.07",
                           "currency": {
                               "name": "USD",
                               "code": "USD"
                           }
                       },
                       "description": "Перевод организации",
                       "from": "Счет 75106830613657916952",
                       "to": "Счет 11776614605963066702"
                     },
                     {
                       "id": 142264268,
                       "state": "EXECUTED",
                       "date": "2019-04-04T23:20:05.206878",
                       "operationAmount": {
                           "amount": "79114.93",
                           "currency": {
                                "name": "USD",
                                "code": "USD"
                           }
                       },
                    "description": "Перевод со счета на счет",
                    "from": "Счет 19708645243227258542",
                    "to": "Счет 75651667383060284188"
                    }
          ```
    - Функция transaction_descriptions - генератор, который принимает список словарей с транзакциями и возвращает описание каждой операции по очереди.
   
    *Пример использования функции transaction_descriptions:*

          ```
              transactions - список словарей, содержащий набор данных о каждой транзакции.
              descriptions = transaction_descriptions(transactions) #создаем переменную, в которую будет передаватья результат работы функции при каждой итерации
              for _ in range(5): #задаем количество итераций
                  print(next(descriptions)) #выводим результат каждой итерации поочередно
          >>> Перевод организации
              Перевод со счета на счет
              Перевод со счета на счет
              Перевод с карты на карту
              Перевод организации
          ```
    - Функция card_number_generator - генератор, который выдает номера банковских карт в формате XXXX XXXX XXXX XXXX , где X — цифра номера карты. Генератор может сгенерировать номера карт в заданном диапазоне от 0000 0000 0000 0001 до 9999 9999 9999 9999.
      Генератор должен принимать начальное и конечное значения для генерации диапазона номеров.
   
    *Пример использования функции card_number_generator:*

          ```
             for card_number in card_number_generator(1, 5): #задаем начальное и конечное значения для генерации диапазона номеров  
             print(card_number) #поочередно выводим результат каждой итерации согласно заданному диапазону

          >>> 0000 0000 0000 0001
              0000 0000 0000 0002
              0000 0000 0000 0003
              0000 0000 0000 0004
              0000 0000 0000 0005
          ```
5. В текущей версии проекта добавлен модуль decorators, содержащий декоратор log. Декоратор log автоматически логирует начало и конец выполнения функции, а также ее результаты или возникшие ошибки.\
   Декоратор принимает необязательный аргумент filename, который определяет, куда будут записываться логи (в файл или в консоль):
   
       - если filename задан, логи записываются в указанный файл.
       - если filename не задан, логи выводятся в консоль.
   
Логирование включает:

       - имя функции и результат выполнения при успешной операции.
       - имя функции, тип возникшей ошибки и входные параметры, если выполнение функции привело к ошибке.
                 
   *Пример использования декоратора log:*
      
          ```
          @log(filename="mylog.txt")
             def apply_get_mask_card_number(card_number: str) -> str:
                 return get_mask_card_number(card_number)
             result = apply_get_mask_card_number("7000792289606361")
       Ожидаемый вывод в лог-файл mylog.txt при успешном выполнении:
             >>>apply_get_mask_card_number ok. Result: 7000 79** **** 6361
       Ожидаемый вывод при ошибке:
             >>>apply_get_mask_card_number error: ValueError. Inputs: ('70007922896063&1',), {}
         ```
## Установка:

1. Клонируйте репозиторий:
```
git clone https://github.com/AlexanderKokorinV/Project_Mask.git
```
2. Установите зависимости:
```
pip install -r requirements.txt
```

## Тестирование
Проект использует `pytest` для написания и выполнения тестов. Чтобы запустить тесты, следуйте инструкциям ниже:
1. Убедитесь, что `pytest` установлен. Если нет, установите его командой:
```
pip install pytest
```
2. В корневой директории проекта выполните команду для запуска всех тестов:
```
pytest
```
3. Если необходимо, вы можете указать конкретный файл теста:
```
pytest tests/test_generators.py
```
Это позволит убедиться, что проект работает корректно и все функции проходят проверку.

## Лицензия:

Этот проект лицензирован по [лицензии MIT](LICENSE).
